"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[770],{99770:(e,a,t)=>{t.r(a),t.d(a,{ccipFetch:()=>k,offchainLookup:()=>g,offchainLookupAbiItem:()=>y,offchainLookupSignature:()=>m});var r=t(76143),s=t(96070),n=t(62027),o=t(38673);class c extends n.G{constructor({callbackSelector:e,cause:a,data:t,extraData:r,sender:s,urls:n}){super(a.shortMessage||"An error occurred while fetching for an offchain result.",{cause:a,metaMessages:[...a.metaMessages||[],a.metaMessages?.length?"":[],"Offchain Gateway Call:",n&&["  Gateway URL(s):",...n.map((e=>`    ${(0,o.Gr)(e)}`))],`  Sender: ${s}`,`  Data: ${t}`,`  Callback selector: ${e}`,`  Extra data: ${r}`].flat()}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupError"})}}class d extends n.G{constructor({result:e,url:a}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,o.Gr)(a)}`,`Response: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupResponseMalformedError"})}}class l extends n.G{constructor({sender:e,to:a}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${a}`,`OffchainLookup sender address: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupSenderMismatchError"})}}var u=t(78863),i=t(86899),f=t(45444),h=t(26087),p=t(49321),b=t(57040),w=t(15102);const m="0x556f1830",y={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function g(e,{blockNumber:a,blockTag:t,data:s,to:n}){const{args:o}=(0,i.p)({data:s,abi:[y]}),[d,u,w,m,g]=o;try{if(!function(e,a){if(!(0,p.U)(e))throw new h.b({address:e});if(!(0,p.U)(a))throw new h.b({address:a});return e.toLowerCase()===a.toLowerCase()}(n,d))throw new l({sender:d,to:n});const s=await k({data:w,sender:d,urls:u}),{data:o}=await(0,r.R)(e,{blockNumber:a,blockTag:t,data:(0,b.zo)([m,(0,f.E)([{type:"bytes"},{type:"bytes"}],[s,g])]),to:n});return o}catch(e){throw new c({callbackSelector:m,cause:e,data:s,extraData:g,sender:d,urls:u})}}async function k({data:e,sender:a,urls:t}){let r=new Error("An unknown error occurred.");for(let n=0;n<t.length;n++){const o=t[n],c=o.includes("{data}")?"GET":"POST",l="POST"===c?{data:e,sender:a}:void 0;try{const t=await fetch(o.replace("{sender}",a).replace("{data}",e),{body:JSON.stringify(l),method:c});let n;if(n=t.headers.get("Content-Type")?.startsWith("application/json")?(await t.json()).data:await t.text(),!t.ok){r=new u.Gg({body:l,details:n?.error?(0,s.P)(n.error):t.statusText,headers:t.headers,status:t.status,url:o});continue}if(!(0,w.v)(n)){r=new d({result:n,url:o});continue}return n}catch(e){r=new u.Gg({body:l,details:e.message,url:o})}}throw r}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksT0FBRUUsRUFBTSxLQUFFQyxJQUM1QyxJQUFJOEMsRUFBUSxJQUFJQyxNQUFNLDhCQUN0QixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSWhELEVBQUtJLE9BQVE0QyxJQUFLLENBQ2xDLE1BQU0xQyxFQUFNTixFQUFLZ0QsR0FDWEMsRUFBUzNDLEVBQUk0QyxTQUFTLFVBQVksTUFBUSxPQUMxQ0MsRUFBa0IsU0FBWEYsRUFBb0IsQ0FBRXBELE9BQU1FLGVBQVdxRCxFQUNwRCxJQUNJLE1BQU1DLFFBQWlCQyxNQUFNaEQsRUFBSWlELFFBQVEsV0FBWXhELEdBQVF3RCxRQUFRLFNBQVUxRCxHQUFPLENBQ2xGc0QsS0FBTUssS0FBS3ZDLFVBQVVrQyxHQUNyQkYsV0FFSixJQUFJakMsRUFPSixHQUxJQSxFQURBcUMsRUFBU0ksUUFBUUMsSUFBSSxpQkFBaUJDLFdBQVcsMkJBQ2pDTixFQUFTTyxRQUFRL0QsV0FHakJ3RCxFQUFTUSxRQUV4QlIsRUFBU1MsR0FBSSxDQUNkaEIsRUFBUSxJQUFJLEtBQWlCLENBQ3pCSyxPQUNBWSxRQUFTL0MsR0FBUThCLE9BQ1gsRUFBQTdCLEVBQUEsR0FBVUQsRUFBTzhCLE9BQ2pCTyxFQUFTVyxXQUNmUCxRQUFTSixFQUFTSSxRQUNsQlEsT0FBUVosRUFBU1ksT0FDakIzRCxRQUVKLFFBQ0osQ0FDQSxLQUFLLEVBQUE0RCxFQUFBLEdBQU1sRCxHQUFTLENBQ2hCOEIsRUFBUSxJQUFJL0IsRUFBcUMsQ0FDN0NDLFNBQ0FWLFFBRUosUUFDSixDQUNBLE9BQU9VLENBUVgsQ0FOQSxNQUFPNkIsR0FDSEMsRUFBUSxJQUFJLEtBQWlCLENBQ3pCSyxPQUNBWSxRQUFTbEIsRUFBSXNCLFFBQ2I3RCxPQUVSLENBQ0osQ0FDQSxNQUFNd0MsQ0FDVixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3ZpZW0vX2VzbS9lcnJvcnMvY2NpcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdmllbS9fZXNtL3V0aWxzL2NjaXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3ZpZW0vX2VzbS91dGlscy9hZGRyZXNzL2lzQWRkcmVzc0VxdWFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL3V0aWxzL3N0cmluZ2lmeS5qcyc7XG5pbXBvcnQgeyBCYXNlRXJyb3IgfSBmcm9tICcuL2Jhc2UuanMnO1xuaW1wb3J0IHsgZ2V0VXJsIH0gZnJvbSAnLi91dGlscy5qcyc7XG5leHBvcnQgY2xhc3MgT2ZmY2hhaW5Mb29rdXBFcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoeyBjYWxsYmFja1NlbGVjdG9yLCBjYXVzZSwgZGF0YSwgZXh0cmFEYXRhLCBzZW5kZXIsIHVybHMsIH0pIHtcbiAgICAgICAgc3VwZXIoY2F1c2Uuc2hvcnRNZXNzYWdlIHx8XG4gICAgICAgICAgICAnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgZm9yIGFuIG9mZmNoYWluIHJlc3VsdC4nLCB7XG4gICAgICAgICAgICBjYXVzZSxcbiAgICAgICAgICAgIG1ldGFNZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIC4uLihjYXVzZS5tZXRhTWVzc2FnZXMgfHwgW10pLFxuICAgICAgICAgICAgICAgIGNhdXNlLm1ldGFNZXNzYWdlcz8ubGVuZ3RoID8gJycgOiBbXSxcbiAgICAgICAgICAgICAgICAnT2ZmY2hhaW4gR2F0ZXdheSBDYWxsOicsXG4gICAgICAgICAgICAgICAgdXJscyAmJiBbXG4gICAgICAgICAgICAgICAgICAgICcgIEdhdGV3YXkgVVJMKHMpOicsXG4gICAgICAgICAgICAgICAgICAgIC4uLnVybHMubWFwKCh1cmwpID0+IGAgICAgJHtnZXRVcmwodXJsKX1gKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGAgIFNlbmRlcjogJHtzZW5kZXJ9YCxcbiAgICAgICAgICAgICAgICBgICBEYXRhOiAke2RhdGF9YCxcbiAgICAgICAgICAgICAgICBgICBDYWxsYmFjayBzZWxlY3RvcjogJHtjYWxsYmFja1NlbGVjdG9yfWAsXG4gICAgICAgICAgICAgICAgYCAgRXh0cmEgZGF0YTogJHtleHRyYURhdGF9YCxcbiAgICAgICAgICAgIF0uZmxhdCgpLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogJ09mZmNoYWluTG9va3VwRXJyb3InXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPZmZjaGFpbkxvb2t1cFJlc3BvbnNlTWFsZm9ybWVkRXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHsgcmVzdWx0LCB1cmwgfSkge1xuICAgICAgICBzdXBlcignT2ZmY2hhaW4gZ2F0ZXdheSByZXNwb25zZSBpcyBtYWxmb3JtZWQuIFJlc3BvbnNlIGRhdGEgbXVzdCBiZSBhIGhleCB2YWx1ZS4nLCB7XG4gICAgICAgICAgICBtZXRhTWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICBgR2F0ZXdheSBVUkw6ICR7Z2V0VXJsKHVybCl9YCxcbiAgICAgICAgICAgICAgICBgUmVzcG9uc2U6ICR7c3RyaW5naWZ5KHJlc3VsdCl9YCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAnT2ZmY2hhaW5Mb29rdXBSZXNwb25zZU1hbGZvcm1lZEVycm9yJ1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT2ZmY2hhaW5Mb29rdXBTZW5kZXJNaXNtYXRjaEVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHNlbmRlciwgdG8gfSkge1xuICAgICAgICBzdXBlcignUmV2ZXJ0ZWQgc2VuZGVyIGFkZHJlc3MgZG9lcyBub3QgbWF0Y2ggdGFyZ2V0IGNvbnRyYWN0IGFkZHJlc3MgKGB0b2ApLicsIHtcbiAgICAgICAgICAgIG1ldGFNZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIGBDb250cmFjdCBhZGRyZXNzOiAke3RvfWAsXG4gICAgICAgICAgICAgICAgYE9mZmNoYWluTG9va3VwIHNlbmRlciBhZGRyZXNzOiAke3NlbmRlcn1gLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6ICdPZmZjaGFpbkxvb2t1cFNlbmRlck1pc21hdGNoRXJyb3InXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNjaXAuanMubWFwIiwiaW1wb3J0IHsgY2FsbCB9IGZyb20gJy4uL2FjdGlvbnMvcHVibGljL2NhbGwuanMnO1xuaW1wb3J0IHt9IGZyb20gJy4uL2Vycm9ycy9iYXNlLmpzJztcbmltcG9ydCB7IE9mZmNoYWluTG9va3VwRXJyb3IsIE9mZmNoYWluTG9va3VwUmVzcG9uc2VNYWxmb3JtZWRFcnJvciwgT2ZmY2hhaW5Mb29rdXBTZW5kZXJNaXNtYXRjaEVycm9yLCB9IGZyb20gJy4uL2Vycm9ycy9jY2lwLmpzJztcbmltcG9ydCB7IEh0dHBSZXF1ZXN0RXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvcmVxdWVzdC5qcyc7XG5pbXBvcnQgeyBkZWNvZGVFcnJvclJlc3VsdCB9IGZyb20gJy4vYWJpL2RlY29kZUVycm9yUmVzdWx0LmpzJztcbmltcG9ydCB7IGVuY29kZUFiaVBhcmFtZXRlcnMgfSBmcm9tICcuL2FiaS9lbmNvZGVBYmlQYXJhbWV0ZXJzLmpzJztcbmltcG9ydCB7IGlzQWRkcmVzc0VxdWFsIH0gZnJvbSAnLi9hZGRyZXNzL2lzQWRkcmVzc0VxdWFsLmpzJztcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gJy4vZGF0YS9jb25jYXQuanMnO1xuaW1wb3J0IHsgaXNIZXggfSBmcm9tICcuL2RhdGEvaXNIZXguanMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuZXhwb3J0IGNvbnN0IG9mZmNoYWluTG9va3VwU2lnbmF0dXJlID0gJzB4NTU2ZjE4MzAnO1xuZXhwb3J0IGNvbnN0IG9mZmNoYWluTG9va3VwQWJpSXRlbSA9IHtcbiAgICBuYW1lOiAnT2ZmY2hhaW5Mb29rdXAnLFxuICAgIHR5cGU6ICdlcnJvcicsXG4gICAgaW5wdXRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZW5kZXInLFxuICAgICAgICAgICAgdHlwZTogJ2FkZHJlc3MnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndXJscycsXG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nW10nLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnY2FsbERhdGEnLFxuICAgICAgICAgICAgdHlwZTogJ2J5dGVzJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2NhbGxiYWNrRnVuY3Rpb24nLFxuICAgICAgICAgICAgdHlwZTogJ2J5dGVzNCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdleHRyYURhdGEnLFxuICAgICAgICAgICAgdHlwZTogJ2J5dGVzJyxcbiAgICAgICAgfSxcbiAgICBdLFxufTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvZmZjaGFpbkxvb2t1cChjbGllbnQsIHsgYmxvY2tOdW1iZXIsIGJsb2NrVGFnLCBkYXRhLCB0bywgfSkge1xuICAgIGNvbnN0IHsgYXJncyB9ID0gZGVjb2RlRXJyb3JSZXN1bHQoe1xuICAgICAgICBkYXRhLFxuICAgICAgICBhYmk6IFtvZmZjaGFpbkxvb2t1cEFiaUl0ZW1dLFxuICAgIH0pO1xuICAgIGNvbnN0IFtzZW5kZXIsIHVybHMsIGNhbGxEYXRhLCBjYWxsYmFja1NlbGVjdG9yLCBleHRyYURhdGFdID0gYXJncztcbiAgICB0cnkge1xuICAgICAgICBpZiAoIWlzQWRkcmVzc0VxdWFsKHRvLCBzZW5kZXIpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IE9mZmNoYWluTG9va3VwU2VuZGVyTWlzbWF0Y2hFcnJvcih7IHNlbmRlciwgdG8gfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNjaXBGZXRjaCh7IGRhdGE6IGNhbGxEYXRhLCBzZW5kZXIsIHVybHMgfSk7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogZGF0YV8gfSA9IGF3YWl0IGNhbGwoY2xpZW50LCB7XG4gICAgICAgICAgICBibG9ja051bWJlcixcbiAgICAgICAgICAgIGJsb2NrVGFnLFxuICAgICAgICAgICAgZGF0YTogY29uY2F0KFtcbiAgICAgICAgICAgICAgICBjYWxsYmFja1NlbGVjdG9yLFxuICAgICAgICAgICAgICAgIGVuY29kZUFiaVBhcmFtZXRlcnMoW3sgdHlwZTogJ2J5dGVzJyB9LCB7IHR5cGU6ICdieXRlcycgfV0sIFtyZXN1bHQsIGV4dHJhRGF0YV0pLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB0byxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkYXRhXztcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgT2ZmY2hhaW5Mb29rdXBFcnJvcih7XG4gICAgICAgICAgICBjYWxsYmFja1NlbGVjdG9yLFxuICAgICAgICAgICAgY2F1c2U6IGVycixcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBleHRyYURhdGEsXG4gICAgICAgICAgICBzZW5kZXIsXG4gICAgICAgICAgICB1cmxzLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2NpcEZldGNoKHsgZGF0YSwgc2VuZGVyLCB1cmxzLCB9KSB7XG4gICAgbGV0IGVycm9yID0gbmV3IEVycm9yKCdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXJscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB1cmwgPSB1cmxzW2ldO1xuICAgICAgICBjb25zdCBtZXRob2QgPSB1cmwuaW5jbHVkZXMoJ3tkYXRhfScpID8gJ0dFVCcgOiAnUE9TVCc7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBtZXRob2QgPT09ICdQT1NUJyA/IHsgZGF0YSwgc2VuZGVyIH0gOiB1bmRlZmluZWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC5yZXBsYWNlKCd7c2VuZGVyfScsIHNlbmRlcikucmVwbGFjZSgne2RhdGF9JywgZGF0YSksIHtcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuaGVhZGVycy5nZXQoJ0NvbnRlbnQtVHlwZScpPy5zdGFydHNXaXRoKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKS5kYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLnRleHQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgSHR0cFJlcXVlc3RFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHJlc3VsdD8uZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3RyaW5naWZ5KHJlc3VsdC5lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNIZXgocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIGVycm9yID0gbmV3IE9mZmNoYWluTG9va3VwUmVzcG9uc2VNYWxmb3JtZWRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBlcnJvciA9IG5ldyBIdHRwUmVxdWVzdEVycm9yKHtcbiAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IGVyci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2NpcC5qcy5tYXAiLCJpbXBvcnQgeyBJbnZhbGlkQWRkcmVzc0Vycm9yLCB9IGZyb20gJy4uLy4uL2Vycm9ycy9hZGRyZXNzLmpzJztcbmltcG9ydCB7IGlzQWRkcmVzcyB9IGZyb20gJy4vaXNBZGRyZXNzLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBpc0FkZHJlc3NFcXVhbChhLCBiKSB7XG4gICAgaWYgKCFpc0FkZHJlc3MoYSkpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkQWRkcmVzc0Vycm9yKHsgYWRkcmVzczogYSB9KTtcbiAgICBpZiAoIWlzQWRkcmVzcyhiKSlcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBZGRyZXNzRXJyb3IoeyBhZGRyZXNzOiBiIH0pO1xuICAgIHJldHVybiBhLnRvTG93ZXJDYXNlKCkgPT09IGIudG9Mb3dlckNhc2UoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQWRkcmVzc0VxdWFsLmpzLm1hcCJdLCJuYW1lcyI6WyJPZmZjaGFpbkxvb2t1cEVycm9yIiwiY29uc3RydWN0b3IiLCJjYWxsYmFja1NlbGVjdG9yIiwiY2F1c2UiLCJkYXRhIiwiZXh0cmFEYXRhIiwic2VuZGVyIiwidXJscyIsInN1cGVyIiwic2hvcnRNZXNzYWdlIiwibWV0YU1lc3NhZ2VzIiwibGVuZ3RoIiwibWFwIiwidXJsIiwiZmxhdCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidGhpcyIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiT2ZmY2hhaW5Mb29rdXBSZXNwb25zZU1hbGZvcm1lZEVycm9yIiwicmVzdWx0Iiwic3RyaW5naWZ5IiwiT2ZmY2hhaW5Mb29rdXBTZW5kZXJNaXNtYXRjaEVycm9yIiwidG8iLCJvZmZjaGFpbkxvb2t1cFNpZ25hdHVyZSIsIm9mZmNoYWluTG9va3VwQWJpSXRlbSIsIm5hbWUiLCJ0eXBlIiwiaW5wdXRzIiwiYXN5bmMiLCJvZmZjaGFpbkxvb2t1cCIsImNsaWVudCIsImJsb2NrTnVtYmVyIiwiYmxvY2tUYWciLCJhcmdzIiwiZGVjb2RlRXJyb3JSZXN1bHQiLCJhYmkiLCJjYWxsRGF0YSIsImEiLCJiIiwiaXNBZGRyZXNzIiwiYWRkcmVzcyIsInRvTG93ZXJDYXNlIiwiaXNBZGRyZXNzRXF1YWwiLCJjY2lwRmV0Y2giLCJkYXRhXyIsImNhbGwiLCJjb25jYXQiLCJlbmNvZGVBYmlQYXJhbWV0ZXJzIiwiZXJyIiwiZXJyb3IiLCJFcnJvciIsImkiLCJtZXRob2QiLCJpbmNsdWRlcyIsImJvZHkiLCJ1bmRlZmluZWQiLCJyZXNwb25zZSIsImZldGNoIiwicmVwbGFjZSIsIkpTT04iLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsImpzb24iLCJ0ZXh0Iiwib2siLCJkZXRhaWxzIiwic3RhdHVzVGV4dCIsInN0YXR1cyIsImlzSGV4IiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=